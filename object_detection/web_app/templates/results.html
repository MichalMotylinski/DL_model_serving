<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Results</title>
        <link rel="stylesheet" href="{{ general_style }}" type="text/css">
        <link rel="stylesheet" href="{{ page_style }}" type="text/css">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    </head>

    <script>
        // Function opening image preview
        function onClick(element) {
            var name = element.src;
            document.getElementById("img01").src = name;
            document.getElementById("modal01").style.display = "block";
        }
    </script>

    <body>
        <!-- Top welcome bar -->
        <div id="welcome-bar">
            <div id="logo">
                <a href="{{ index }}" title="Bird Detector">
                    <img id="logo-image" src="{{ logo }}" alt="Bird Detector">
                </a>
            </div>
            <div id="message">
                <p> Welcome to your best online bird detector</p>
            </div>
        </div>

        <!-- Top welcome bar -->
        <div id="navbar">
            <a href="{{ index }}">Home</a>
            <div id="dropdown">
                <button id="dropbtn">Models</button>
                <div id="dropdown-content">
                    <a href="{{ index }}">Bird detector</a>
                </div>
            </div>
            <a href="{{ about }}">About</a>
        </div>

        <!-- Result itmes -->
        <div id="grid-container">

            <!-- Table displaying detection results -->
            <div id="results-container">
                <div class="header">
                    <td colspan="2">Detection results for:</td>
                </div>
                <div class="header">
                    <td colspan="2">{{ filename }}</td>
                </div>
                <div id="results-table-scroll">
                    <table border = 1>
                        {% for key, value, x in result %}
                        <tr>
                            <!-- The only inline styling here as it is easier than moving entire code to js -->
                            <td bgcolor="{{ x }}"></td>
                            <td> {{ key }} </td>
                            <td> {{ value }} </td>
                        </tr>
                        {% endfor %}
                     </table>
                </div>
            </div>

            <!-- Table displaying information about detectable items-->
            <div id="download-container">
                <div id="download-header">
                    <td colspan="2">Find out more about our detectable birds!</td>
                </div>
                <div id="download-table-scroll">
                    <table border = 1>
                        {% for name, link in birds %}
                            <tr>
                                <td> <a href="{{ link }}" target="_blank">{{ name }}</a> </td>
                            </tr>
                        {% endfor %}
                     </table>
                </div>

                <!-- Image download button -->
                <div id="btn1">
                    <p>Click to download image with detection boxes -->
                        <a href="{{ detected }}" download>
                            <button id="download-button"> Download</button>
                        </a>
                    </p>
                </div>
            </div>

            <!-- Original image -->
            <div id="img1" >
                <img class="result-img" src="{{ original }}" alt="Original image" onclick="onClick(this)">
            </div>
            <!-- Image with detection boxes -->
            <div id="img2">
                <img class="result-img" src="{{ detected }}" alt="Image result" onclick="onClick(this)">
            </div>

            <!-- Image preview -->
            <div id="modal01" class="w3-modal" onclick="this.style.display='none'">
                <span id="close">X</span>
                <div id="modal-image">
                    <img id="img01">
                </div>
            </div>
        </div>
    </body>
</html>